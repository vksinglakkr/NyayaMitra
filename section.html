<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Legal Search - Integrated Database</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-slate-100 p-8">
  <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-200">
    <div class="bg-indigo-700 p-6 text-white">
      <h1 class="text-2xl font-bold flex items-center gap-3">
        <i data-lucide="database"></i> NayayMitra Search Engine
      </h1>
      <div id="connectionStatus" class="mt-2 text-xs opacity-80 flex items-center gap-2">
        <span class="animate-pulse w-2 h-2 bg-yellow-400 rounded-full"></span> Checking local data...
      </div>
    </div>

    <div class="p-6 border-b border-slate-100">
      <input type="text" id="searchInput" placeholder="Search by section (e.g., 'Section 01') or keyword..." 
             class="w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 focus:border-indigo-500 outline-none transition-all">
    </div>

    <table class="w-full text-left">
      <thead class="bg-slate-50 text-slate-500 text-xs uppercase font-bold">
        <tr>
          <th class="px-6 py-4">Act</th>
          <th class="px-6 py-4">Section</th>
          <th class="px-6 py-4">Provision Title</th>
        </tr>
      </thead>
      <tbody id="tableBody" class="divide-y divide-slate-100">
        </tbody>
    </table>
  </div>

  <script>
    let masterData = [];

    // LOAD DATA FROM YOUR JSON FILE
    async function init() {
      const statusDiv = document.getElementById('connectionStatus');
      try {
        const response = await fetch('legal_data.json');
        if (!response.ok) throw new Error();
        masterData = await response.json();
        
        statusDiv.innerHTML = `<span class="w-2 h-2 bg-green-400 rounded-full"></span> Connected: ${masterData.length} records active`;
        render(masterData);
      } catch (err) {
        statusDiv.innerHTML = `<span class="w-2 h-2 bg-red-500 rounded-full"></span> Error: 'legal_data.json' not found in this folder.`;
      }
    }

    function render(data) {
      const body = document.getElementById('tableBody');
      body.innerHTML = data.map(item => `
        <tr class="hover:bg-indigo-50/50 cursor-pointer" onclick="window.open('${item.link}', '_blank')">
          <td class="px-6 py-4 font-bold text-indigo-600">${item.law}</td>
          <td class="px-6 py-4 font-mono text-sm">${item.sec}</td>
          <td class="px-6 py-4 text-slate-700">${item.title}</td>
        </tr>
      `).join('');
      lucide.createIcons();
    }

    document.getElementById('searchInput').addEventListener('input', (e) => {
      const val = e.target.value.toLowerCase();
      const filtered = masterData.filter(i => 
        i.title.toLowerCase().includes(val) || i.sec.toLowerCase().includes(val)
      );
      render(filtered);
    });

    init();
  </script>
</body>
</html>