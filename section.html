<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Legal Section Search - New Criminal Laws 2024</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
      background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
      font-family: 'Inter', sans-serif;
    }
    .section-row:hover {
      background-color: #dbeafe;
    }
    /* Styles for the larger text requests */
    .act-title-large { font-size: 1.25rem; font-weight: 900; }
    .section-num-large { font-size: 1.5rem; font-weight: 800; font-family: monospace; }
  </style>
</head>
<body class="min-h-screen p-6">
  <div class="max-w-5xl mx-auto">
    
    <div class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl shadow-lg p-4 mb-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <i data-lucide="book" class="w-6 h-6"></i>
          <div>
            <h2 class="text-lg font-bold">Understanding India's New Criminal Laws 2024</h2>
            <p class="text-sm text-white/80">Search 70 sections across BNSS, BNS, BSA</p>
          </div>
        </div>
        <div class="flex gap-2">
          <button onclick="toggleGuide()" id="guideBtn" class="flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition text-sm font-medium">
            <i data-lucide="info" class="w-4 h-4"></i>
            <span id="guideBtnText">Show Guide</span>
            <span id="guideArrow" class="text-lg">â–¼</span>
          </button>
        </div>
      </div>

      <div class="grid grid-cols-3 gap-3 mt-3">
        <div class="bg-purple-700/50 rounded-lg px-3 py-2 text-center">
          <div class="font-bold text-sm mb-1">BNSS (Procedure)</div>
          <div class="text-xs text-purple-100">FIR, Arrest, Bail, Investigation</div>
        </div>
        <div class="bg-green-700/50 rounded-lg px-3 py-2 text-center">
          <div class="font-bold text-sm mb-1">BNS (Crimes)</div>
          <div class="text-xs text-green-100">Murder, Theft, Fraud, Punishment</div>
        </div>
        <div class="bg-blue-700/50 rounded-lg px-3 py-2 text-center">
          <div class="font-bold text-sm mb-1">BSA (Evidence)</div>
          <div class="text-xs text-blue-100">Electronic Records, Proof, Witness</div>
        </div>
      </div>

      <div id="detailedGuide" class="hidden mt-4 pt-4 border-t border-white/20">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
          <div class="space-y-2">
            <h3 class="font-bold flex items-center gap-2"><i data-lucide="help-circle" class="w-4 h-4"></i> How to use?</h3>
            <ul class="list-disc list-inside text-white/90 space-y-1 text-xs">
              <li>Search by Section Number (e.g., "101")</li>
              <li>Search by Keyword (e.g., "Murder", "Bail")</li>
              <li>Filter by Law using the tabs below</li>
              <li>Click any row to open full text on India Code</li>
            </ul>
          </div>
          <div class="bg-white/10 p-3 rounded-lg">
            <h3 class="font-bold text-xs mb-2">Pro Search Tips:</h3>
            <p class="text-[11px] text-white/80 leading-relaxed">
              Use keywords to find provisions fast. This tool automatically indexes 70+ major sections of the new 2024 criminal laws.
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-2xl shadow-2xl p-6 mb-6">
      <div class="flex items-center gap-3 mb-6">
        <div class="p-3 bg-blue-100 rounded-xl">
          <i data-lucide="database" class="w-8 h-8 text-blue-600"></i>
        </div>
        <div>
          <h1 class="text-2xl font-bold text-gray-800">Legal Section Search</h1>
          <p class="text-sm text-gray-500">Live dynamic database connection</p>
        </div>
      </div>

      <div class="flex gap-2 mb-6 flex-wrap">
        <button onclick="filterByLaw('ALL')" id="tab-ALL" class="tab-btn px-6 py-2.5 rounded-xl font-bold transition-all bg-indigo-600 text-white shadow-lg shadow-indigo-200">ALL</button>
        <button onclick="filterByLaw('BNSS')" id="tab-BNSS" class="tab-btn px-6 py-2.5 rounded-xl font-bold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200">BNSS</button>
        <button onclick="filterByLaw('BNS')" id="tab-BNS" class="tab-btn px-6 py-2.5 rounded-xl font-bold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200">BNS</button>
        <button onclick="filterByLaw('BSA')" id="tab-BSA" class="tab-btn px-6 py-2.5 rounded-xl font-bold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200">BSA</button>
      </div>

      <div class="relative mb-6">
        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
          <i data-lucide="search" class="w-5 h-5 text-gray-400"></i>
        </div>
        <input type="text" id="searchInput" 
          placeholder="Type section number or keywords..."
          class="w-full pl-12 pr-4 py-4 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-50 focus:outline-none transition-all text-lg"
          oninput="performSearch()"
        />
      </div>

      <div class="overflow-x-auto border border-gray-100 rounded-2xl">
        <table class="w-full text-left border-collapse">
          <thead>
            <tr class="bg-gray-50/50 border-b border-gray-100">
              <th class="px-6 py-4 text-xs font-bold text-gray-400 uppercase tracking-wider">Act</th>
              <th class="px-6 py-4 text-xs font-bold text-gray-400 uppercase tracking-wider">Section</th>
              <th class="px-6 py-4 text-xs font-bold text-gray-400 uppercase tracking-wider">Provision Title</th>
              <th class="px-6 py-4 text-xs font-bold text-gray-400 uppercase tracking-wider">Action</th>
            </tr>
          </thead>
          <tbody id="resultsTable" class="divide-y divide-gray-50">
            </tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    let DATABASE = [];
    let activeFilter = 'ALL';

    // Original Toggle Logic
    function toggleGuide() {
      const guide = document.getElementById('detailedGuide');
      const arrow = document.getElementById('guideArrow');
      const btnText = document.getElementById('guideBtnText');
      const isHidden = guide.classList.contains('hidden');
      
      guide.classList.toggle('hidden');
      arrow.style.transform = isHidden ? 'rotate(180deg)' : 'rotate(0deg)';
      btnText.textContent = isHidden ? 'Hide Guide' : 'Show Guide';
    }

    async function loadDatabase() {
      try {
        const response = await fetch('legal_data.json');
        DATABASE = await response.json();
        renderResults();
      } catch (error) {
        console.error('Error loading database:', error);
        document.getElementById('resultsTable').innerHTML = `
          <tr><td colspan="4" class="px-6 py-10 text-center text-red-500">Error loading database. Please check file path.</td></tr>
        `;
      }
    }

    function filterByLaw(law) {
      activeFilter = law;
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.className = 'tab-btn px-6 py-2.5 rounded-xl font-bold transition-all bg-gray-100 text-gray-600 hover:bg-gray-200';
      });
      const activeTab = document.getElementById(`tab-${law}`);
      activeTab.className = 'tab-btn px-6 py-2.5 rounded-xl font-bold transition-all bg-indigo-600 text-white shadow-lg shadow-indigo-200';
      performSearch();
    }

    function performSearch() {
      const query = document.getElementById('searchInput').value.toLowerCase();
      renderResults(query);
    }

    // MODIFIED: Only changed the row.innerHTML part for larger Act/Section and cleaner numbers
    function renderResults(query = '') {
      const tbody = document.getElementById('resultsTable');
      tbody.innerHTML = '';

      const filtered = DATABASE.filter(item => {
        const matchesLaw = activeFilter === 'ALL' || item.Name === activeFilter;
        const matchesQuery = !query || 
          item.Section.toLowerCase().includes(query) || 
          item.Title.toLowerCase().includes(query);
        return matchesLaw && matchesQuery;
      });

      if (filtered.length === 0) {
        tbody.innerHTML = `<tr><td colspan="4" class="px-6 py-10 text-center text-gray-400">No matching sections found</td></tr>`;
        return;
      }

      filtered.forEach(item => {
        const row = document.createElement('tr');
        row.className = 'section-row transition-all cursor-pointer group';
        row.onclick = () => window.open(item.Link, '_blank');

        // Clean "Section" text to show only number
        const cleanSection = item.Section.replace(/Section|section/gi, '').trim();

        row.innerHTML = `
          <td class="px-6 py-5">
            <span class="act-title-large text-indigo-700">${item.Name}</span>
          </td>
          <td class="px-6 py-5">
            <span class="section-num-large text-gray-900">${cleanSection}</span>
          </td>
          <td class="px-6 py-5">
            <div class="text-sm font-semibold text-gray-800 group-hover:text-blue-600 transition-colors">${item.Title}</div>
          </td>
          <td class="px-6 py-5">
            <div class="flex items-center gap-1 text-blue-500 font-bold text-xs">
              OPEN <i data-lucide="external-link" class="w-3 h-3"></i>
            </div>
          </td>
        `;
        tbody.appendChild(row);
      });

      lucide.createIcons();
    }

    window.onload = loadDatabase;
  </script>
</body>
</html>
